@page "/products/create"
@using MultiTenantApp.Application.DTOs
@using MultiTenantApp.Web.Services
@using MultiTenantApp.Web.Components.Products
@inject IProductService ProductService
@inject NavigationManager Navigation
@inject ISnackbar Snackbar

<MudText Typo="Typo.h4" Class="mb-4">Create Product</MudText>

<MudPaper Class="pa-4">
    <ProductForm Model="model" ButtonText="Create" OnValidSubmit="New" />
</MudPaper>

@code {
    private CreateProductDto model = new();

    private async Task New()
    {
        try
        {
            await ProductService.CreateAsync(model);
            Snackbar.Add("Product created successfully", Severity.Success);
            Navigation.NavigateTo("/products");
        }
        catch (Exception ex)
        {
            Snackbar.Add($"Error: {ex.Message}", Severity.Error);
        }
    }
}
