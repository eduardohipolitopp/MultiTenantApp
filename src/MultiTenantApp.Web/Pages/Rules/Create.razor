@page "/rules/create"
@using MultiTenantApp.Web.Services
@using MultiTenantApp.Web.Resources.Pages
@using MultiTenantApp.Web.Components.Rules
@using RulesRes = MultiTenantApp.Web.Resources.Pages.Rules
@inject IRuleService RuleService
@inject NavigationManager Navigation
@inject ISnackbar Snackbar

<MudText Typo="Typo.h4" Class="mb-4">@RulesRes.RulesManagementTitle</MudText>

<MudPaper Class="pa-4">
    <RuleForm @bind-RoleName="roleName" ButtonText="@RulesRes.AddRuleButton" OnValidSubmit="New" />
</MudPaper>

@code {
    private string roleName;

    private async Task New()
    {
        try
        {
            await RuleService.CreateRule(roleName);
            Snackbar.Add("Rule created successfully", Severity.Success);
            Navigation.NavigateTo("/rules");
        }
        catch (Exception ex)
        {
            Snackbar.Add($"Error: {ex.Message}", Severity.Error);
        }
    }
}
